"use strict";var _baseComponent=_interopRequireDefault(require("../helpers/baseComponent")),_classNames3=_interopRequireDefault(require("../helpers/libs/classNames")),_utils=require("./utils");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ownKeys(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(t,e,n){return(e=_toPropertyKey(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toPropertyKey(t){t=_toPrimitive(t,"string");return"symbol"==_typeof(t)?t:String(t)}function _toPrimitive(t,e){if("object"!=_typeof(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0===n)return("string"===e?String:Number)(t);n=n.call(t,e||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(0,_baseComponent.default)({useFunc:!0,data:_utils.defaults,computed:{classes:["prefixCls, buttons, verticalButtons",function(e,t,n){return{prompt:"".concat(e,"__prompt"),input:"".concat(e,"__input"),buttons:(0,_classNames3.default)("".concat(e,"__buttons"),_defineProperty({},"".concat(e,"__buttons--").concat(n?"vertical":"horizontal"),!0)),button:t.map(function(t){return{wrap:(0,_classNames3.default)("".concat(e,"__button"),_defineProperty(_defineProperty(_defineProperty(_defineProperty({},"".concat(e,"__button--").concat(t.type||"default"),t.type||"default"),"".concat(e,"__button--bold"),t.bold),"".concat(e,"__button--disabled"),t.disabled),"".concat(t.className),t.className)),hover:t.hoverClass&&"default"!==t.hoverClass?t.hoverClass:"".concat(e,"__button--hover")}})}}]},methods:{onClosed:function(){var t;this.data.resetOnClose&&(t=_objectSpread(_objectSpread({},this.$$mergeOptionsToData(_utils.defaults)),{},{prompt:null}),this.$$setData(t))},onClose:function(){this.hide()},hide:function(t){this.$$setData({in:!1}),"function"==typeof t&&t.call(this)},show:function(){var t=this.$$mergeOptionsAndBindMethods(Object.assign({},_utils.defaults,0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}));return this.$$setData(_objectSpread({in:!0},t)),this.originalButtons=t.buttons,this.hide.bind(this)},runCallbacks:function(t,e){var n=t.currentTarget.dataset.index,o=this.originalButtons[n];o.disabled||this.hide(function(){return"function"==typeof o[e]&&o[e](t)})},buttonTapped:function(t){this.runCallbacks(t,"onTap")},bindgetuserinfo:function(t){this.runCallbacks(t,"onGetUserInfo")},bindcontact:function(t){this.runCallbacks(t,"onContact")},bindgetphonenumber:function(t){this.runCallbacks(t,"onGotPhoneNumber")},bindopensetting:function(t){this.runCallbacks(t,"onOpenSetting")},bindlaunchapp:function(t){this.runCallbacks(t,"onLaunchApp")},bindchooseavatar:function(t){this.runCallbacks(t,"onChooseAvatar")},onError:function(t){this.runCallbacks(t,"onError")},bindinput:function(t){this.$$setData({"prompt.response":t.detail.value})},open:function(){return this.show(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})},alert:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.open(Object.assign(_objectSpread(_objectSpread({},e),{},{buttons:[{text:e.confirmText||_utils.defaultOptions.confirmText,type:e.confirmType||_utils.defaultOptions.confirmType,onTap:function(t){"function"==typeof e.onConfirm&&e.onConfirm(t)}}]})))},confirm:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.open(Object.assign(_objectSpread(_objectSpread({},e),{},{buttons:[{text:e.cancelText||_utils.defaultOptions.cancelText,type:e.cancelType||_utils.defaultOptions.cancelType,onTap:function(t){"function"==typeof e.onCancel&&e.onCancel(t)}},{text:e.confirmText||_utils.defaultOptions.confirmText,type:e.confirmType||_utils.defaultOptions.confirmType,onTap:function(t){"function"==typeof e.onConfirm&&e.onConfirm(t)}}]})))},prompt:function(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t={fieldtype:n.fieldtype||"text",password:!!n.password,response:n.defaultText||"",placeholder:n.placeholder||"",maxlength:n.maxlength?parseInt(n.maxlength):""};return this.open(Object.assign(_objectSpread(_objectSpread({},n),{},{prompt:t,buttons:[{text:n.cancelText||_utils.defaultOptions.cancelText,type:n.cancelType||_utils.defaultOptions.cancelType,onTap:function(t){"function"==typeof n.onCancel&&n.onCancel(t)}},{text:n.confirmText||_utils.defaultOptions.confirmText,type:n.confirmType||_utils.defaultOptions.confirmType,onTap:function(t){"function"==typeof n.onConfirm&&n.onConfirm(t,e.data.prompt.response)}}]})))}}});